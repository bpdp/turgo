apply plugin: 'java'
apply plugin: 'jetty'
apply plugin: 'war'

sourceCompatibility = '1.8'
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

// NetBeans will automatically add "run" and "debug" tasks relying on the
// "mainClass" property. You may however define the property prior executing
// tasks by passing a "-PmainClass=<QUALIFIED_CLASS_NAME>" argument.
//
// Note however, that you may define your own "run" and "debug" task if you
// prefer. In this case NetBeans will not add these tasks but you may rely on
// your own implementation.
if (!hasProperty('mainClass')) {
    ext.mainClass = 'name.bpdp.turgo.core.TurgoServer'
}

repositories {
    mavenLocal()
    mavenCentral()
    // You may define additional repositories, or even remove "mavenCentral()".
    // Read more about repositories here:
    //   http://www.gradle.org/docs/current/userguide/dependency_management.html#sec:repositories
    
    maven { url 'https://oss.sonatype.org/content/repositories/snapshots' }

    // maven repo for Prova
    maven { url "https://prova.ws/maven2" }
    // maven repo for Prova dependencies com.springsource.*
    maven { url "http://repository.springsource.com/maven/bundles/release" }
    maven { url "http://repository.springsource.com/maven/bundles/external" }
    // maven repo for Prova dependencies: openrdf-sesame-onejar-osgi
    maven { url "https://repository.jboss.org/nexus/content/repositories/thirdparty-releases" }    
    
}

dependencies {

    //  compile => for compile time deps
    //  testCompile => for test time deps
    //  provided => assumed to be provided by users
    
    compile 'org.eclipse.jetty:jetty-server:9.1.3.v20140225'
    
    compile group: 'ws.prova', name: 'ws.prova.compact', version: '3.2.1'
    compile group: 'org.rythmengine', name: 'rythm-engine', version: '1.0'
    
    // You can read more about how to add dependency here:
    //   http://www.gradle.org/docs/current/userguide/dependency_management.html#sec:how_to_declare_your_dependencies
    testCompile group: 'junit', name: 'junit', version: '4.10'
    
}

test {
  /* Configure which tests are included
  include 'org/foo/**'
  exclude 'org/boo/**'
  */
  maxParallelForks = 5
  maxHeapSize = '1024m'

}

/*
If you're uploading stuff to Maven, Gradle needs to generate a POM.
Please edit the details below.
 */
def configurePom(def pom) {
  pom.project {
    name rootProject.name
    description 'Pragmatic Web framework'
    inceptionYear '2014'
    packaging 'jar'

    url 'http://github.com/bpdp/turgo'

    developers {
      developer {
        id 'bpdp'
        name 'Bambang Purnomosidi D. P.'
        email 'bpurnomo@akakom.ac.id'
      }
    }

    scm {
      url 'http://github.com/bpdp/turgo'
    }

    licenses {
      license {
        name 'The Apache Software License, Version 2.0'
        url 'http://www.apache.org/licenses/LICENSE-2.0.txt'
        distribution 'repo'
      }
    }

    properties {
      setProperty('project.build.sourceEncoding', 'UTF8')
    }
  }
}
